# ðŸ“¦ CHANGELOG

## v1.1.0 â€” Relay Coverage & UI Enhancements (2025-07-02)

### ðŸš€ New Features

- **Relay Presence System**
  - Introduced `source_relays` tracking for all event types (articles, notes, replies, etc.)
  - Added `get_relay_presence()` and `attach_relay_badge()` to compute and render relay coverage
  - Automatically identifies:
    - âœ… Fully replicated events
    - âš  Partially available events
    - ðŸ”´ Events found only on Primal backup
  - `relay_badge` now rendered across all views (`articles.html`, `notes.html`, `replies.html`, `timeline.html`)
  - `relay_presence` detail retained in DB for future tooling

- **UI Enhancements**
  - Clean, color-coded badge system:
    - ðŸŸ¢ Green: full coverage
    - ðŸŸ¡ Yellow: partial
    - ðŸ”´ Red: Primal-only
  - Expandable `<details>` block shows full relay-by-relay status
  - Relay coverage shown consistently across all API and template views

### ðŸ§± Backend Improvements

- `migrate_json_to_sqlite.py` updated to include `source_relays` in all tables
- `/api/<event_type>/<pubkey>` routes now include full `relay_badge` HTML in API responses
- Relay badge logic centralized in `app.py` via `attach_relay_badge()` and `get_relay_presence()`, designed for rows retrieved from the database
- Fixed bug where `_sourcd` typo caused incorrect relay tracking